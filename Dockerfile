FROM node:18.20.1

ARG COMMIT_SHA
ENV BUILD_SHA ${COMMIT_SHA}

WORKDIR /usr/src/app

COPY . .

ARG MYSECRET
ENV MYSECRET ${MYSECRET}

ARG MYSECRET2
ENV MYSECRET2 ${MYSECRET2}




# ARG MARKET
ARG MARKET1
ARG MARKET2
ARG MARKET3
ARG MARKET4

ENV MARKET ${_MARKET}
ENV MARKET1 ${MARKET1}
ENV MARKET2 ${MARKET2}
ENV MARKET3 ${MARKET3}
ENV MARKET4 ${MARKET4}
ENV MARKET5 "BYE!"






ARG ENV_FILE
ARG CONFIG_SECRET_NAME

ENV ENV_FILE ${ENV_FILE}
ENV CONFIG_SECRET_NAME ${CONFIG_SECRET_NAME}
ENV NODE_ENV=production
ENV PORT=8080

RUN yarn install
RUN yarn build
CMD ["yarn", "start"]
